'use babel';
/* @flow */

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var isEmpty = require('nuclide-commons').object.isEmpty;

function filterEmptyResults(resultsGroupedByService) {
  var filteredTree = {};

  for (var serviceName in resultsGroupedByService) {
    var directories = resultsGroupedByService[serviceName];
    var nonEmptyDirectories = {};
    for (var dirName in directories) {
      if (directories[dirName].items.length) {
        nonEmptyDirectories[dirName] = directories[dirName];
      }
    }
    if (!isEmpty(nonEmptyDirectories)) {
      filteredTree[serviceName] = nonEmptyDirectories;
    }
  }
  return filteredTree;
}

function flattenResults(resultsGroupedByService) {
  var items = [];
  for (var serviceName in resultsGroupedByService) {
    for (var dirName in resultsGroupedByService[serviceName]) {
      items.push(resultsGroupedByService[serviceName][dirName].items);
    }
  }
  return Array.prototype.concat.apply([], items);
}

module.exports = {
  filterEmptyResults: filterEmptyResults,
  flattenResults: flattenResults
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRyZXdqb25lcy8uYXRvbS9wYWNrYWdlcy9udWNsaWRlLXF1aWNrLW9wZW4vbGliL3NlYXJjaFJlc3VsdEhlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxDQUFDOzs7Ozs7Ozs7OztJQWNWLE9BQU8sR0FDTCxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxNQUFNLENBRG5DLE9BQU87O0FBR1QsU0FBUyxrQkFBa0IsQ0FBQyx1QkFBdUMsRUFBbUI7QUFDcEYsTUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDOztBQUV0QixPQUFLLElBQUksV0FBVyxJQUFJLHVCQUF1QixFQUFFO0FBQy9DLFFBQUksV0FBVyxHQUFHLHVCQUF1QixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZELFFBQUksbUJBQW1CLEdBQUcsRUFBRSxDQUFDO0FBQzdCLFNBQUssSUFBSSxPQUFPLElBQUksV0FBVyxFQUFFO0FBQy9CLFVBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7QUFDckMsMkJBQW1CLENBQUMsT0FBTyxDQUFDLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO09BQ3JEO0tBQ0Y7QUFDRCxRQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQUU7QUFDakMsa0JBQVksQ0FBQyxXQUFXLENBQUMsR0FBRyxtQkFBbUIsQ0FBQztLQUNqRDtHQUNGO0FBQ0QsU0FBTyxZQUFZLENBQUM7Q0FDckI7O0FBRUQsU0FBUyxjQUFjLENBQUMsdUJBQXVDLEVBQWM7QUFDM0UsTUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2YsT0FBSyxJQUFJLFdBQVcsSUFBSSx1QkFBdUIsRUFBRTtBQUMvQyxTQUFLLElBQUksT0FBTyxJQUFJLHVCQUF1QixDQUFDLFdBQVcsQ0FBQyxFQUFFO0FBQ3hELFdBQUssQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDakU7R0FDRjtBQUNELFNBQU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNoRDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHO0FBQ2Ysb0JBQWtCLEVBQWxCLGtCQUFrQjtBQUNsQixnQkFBYyxFQUFkLGNBQWM7Q0FDZixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9hbmRyZXdqb25lcy8uYXRvbS9wYWNrYWdlcy9udWNsaWRlLXF1aWNrLW9wZW4vbGliL3NlYXJjaFJlc3VsdEhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG50eXBlIEdyb3VwZWRSZXN1bHRzID0ge3N0cmluZzoge3N0cmluZzoge2l0ZW1zOiBBcnJheTxhbnk+fX19O1xuXG52YXIge1xuICBpc0VtcHR5XG59ID0gcmVxdWlyZSgnbnVjbGlkZS1jb21tb25zJykub2JqZWN0O1xuXG5mdW5jdGlvbiBmaWx0ZXJFbXB0eVJlc3VsdHMocmVzdWx0c0dyb3VwZWRCeVNlcnZpY2U6IEdyb3VwZWRSZXN1bHRzKSA6IEdyb3VwZWRSZXN1bHRzIHtcbiAgdmFyIGZpbHRlcmVkVHJlZSA9IHt9O1xuXG4gIGZvciAodmFyIHNlcnZpY2VOYW1lIGluIHJlc3VsdHNHcm91cGVkQnlTZXJ2aWNlKSB7XG4gICAgdmFyIGRpcmVjdG9yaWVzID0gcmVzdWx0c0dyb3VwZWRCeVNlcnZpY2Vbc2VydmljZU5hbWVdO1xuICAgIHZhciBub25FbXB0eURpcmVjdG9yaWVzID0ge307XG4gICAgZm9yICh2YXIgZGlyTmFtZSBpbiBkaXJlY3Rvcmllcykge1xuICAgICAgaWYgKGRpcmVjdG9yaWVzW2Rpck5hbWVdLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICBub25FbXB0eURpcmVjdG9yaWVzW2Rpck5hbWVdID0gZGlyZWN0b3JpZXNbZGlyTmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNFbXB0eShub25FbXB0eURpcmVjdG9yaWVzKSkge1xuICAgICAgZmlsdGVyZWRUcmVlW3NlcnZpY2VOYW1lXSA9IG5vbkVtcHR5RGlyZWN0b3JpZXM7XG4gICAgfVxuICB9XG4gIHJldHVybiBmaWx0ZXJlZFRyZWU7XG59XG5cbmZ1bmN0aW9uIGZsYXR0ZW5SZXN1bHRzKHJlc3VsdHNHcm91cGVkQnlTZXJ2aWNlOiBHcm91cGVkUmVzdWx0cyk6IEFycmF5PGFueT4ge1xuICB2YXIgaXRlbXMgPSBbXTtcbiAgZm9yICh2YXIgc2VydmljZU5hbWUgaW4gcmVzdWx0c0dyb3VwZWRCeVNlcnZpY2UpIHtcbiAgICBmb3IgKHZhciBkaXJOYW1lIGluIHJlc3VsdHNHcm91cGVkQnlTZXJ2aWNlW3NlcnZpY2VOYW1lXSkge1xuICAgICAgaXRlbXMucHVzaChyZXN1bHRzR3JvdXBlZEJ5U2VydmljZVtzZXJ2aWNlTmFtZV1bZGlyTmFtZV0uaXRlbXMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgaXRlbXMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZmlsdGVyRW1wdHlSZXN1bHRzLFxuICBmbGF0dGVuUmVzdWx0cyxcbn07XG4iXX0=