var os_1 = require("os");
var WrapInProperty = (function () {
    function WrapInProperty() {
        this.key = WrapInProperty.name;
    }
    WrapInProperty.prototype.canProvideFix = function (info) {
        if (info.positionNode && info.positionNode.parent && info.positionNode.parent.parent && info.positionNode.parent.parent.symbol && info.positionNode.parent.parent.symbol && info.positionNode.parent.parent.symbol.name == "__constructor") {
            if (info.positionNode.parent.kind == 135) {
                return { display: "Wrap " + info.positionNode.parent.symbol.name + " in a read only property" };
            }
        }
    };
    WrapInProperty.prototype.provideFix = function (info) {
        var classDecl = info.positionNode.parent.parent.parent;
        var constructorDecl = info.positionNode.parent.parent;
        var paramDecl = info.positionNode.parent;
        var symbolName = info.positionNode.parent.symbol.name;
        var typeName = getArgumentType(info, paramDecl);
        var firstBrace = classDecl.getChildren().filter(function (x) {
            return x.kind == 14;
        })[0];
        var classIndent = info.service.getIndentationAtPosition(info.filePath, firstBrace.end, info.project.projectFile.project.formatCodeOptions);
        var indent = info.project.projectFile.project.formatCodeOptions.IndentSize;
        var indentSetting = {
            classIndent: classIndent,
            indent: indent
        };
        var assignemnt = createAssignment(constructorDecl, symbolName, indentSetting, info.filePath);
        var property = createProperty(classDecl, symbolName, typeName, indentSetting, info.filePath);
        return [assignemnt, property];
    };
    return WrapInProperty;
})();
exports.WrapInProperty = WrapInProperty;
function createAssignment(constructorDecl, symbolName, indentSetting, filePath) {
    var indentLevel2 = createIndent(indentSetting, 2);
    var lastBrace = constructorDecl.body.getChildren().filter(function (x) {
        return x.kind == 15;
    }).reverse()[0];
    var newText = "" + os_1.EOL + indentLevel2 + "this._" + symbolName + " = " + symbolName + ";";
    return {
        span: {
            start: lastBrace.end - (6 + indentSetting.classIndent),
            length: 0
        },
        newText: newText,
        filePath: filePath
    };
}
function createProperty(classDecl, symbolName, typeName, indentSetting, filePath) {
    var indentLevel1 = createIndent(indentSetting, 1);
    var indentLevel2 = createIndent(indentSetting, 2);
    var newText = "" + os_1.EOL + indentLevel1 + "_" + symbolName + ": " + typeName + ";" + ("" + os_1.EOL + indentLevel1 + "get " + symbolName + "(): " + typeName + " {") + ("" + os_1.EOL + indentLevel2 + "return this._" + symbolName + ";") + ("" + os_1.EOL + indentLevel1 + "}");
    return {
        span: {
            start: classDecl.end - (2 + indentSetting.classIndent),
            length: 0
        },
        newText: newText,
        filePath: filePath
    };
}
function createIndent(indentSetting, level) {
    return Array(indentSetting.classIndent + indentSetting.indent * level + 1).join(" ");
}
function getArgumentType(info, paramDecl) {
    if (paramDecl.type) {
        var start = paramDecl.type.pos;
        var end = paramDecl.type.end;
        return info.sourceFile.text.substr(start, end - start).trim();
    } else {
        return "any";
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRyZXdqb25lcy8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvZGlzdC9tYWluL2xhbmcvZml4bXl0cy9xdWlja0ZpeGVzL3dyYXBJblByb3BlcnR5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixJQUFJLGNBQWMsR0FBRyxDQUFDLFlBQVk7QUFDOUIsYUFBUyxjQUFjLEdBQUc7QUFDdEIsWUFBSSxDQUFDLEdBQUcsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDO0tBQ2xDO0FBQ0Qsa0JBQWMsQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHLFVBQVUsSUFBSSxFQUFFO0FBQ3JELFlBQUksSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFDN0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQ3pFLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksZUFBZSxFQUFFO0FBQzFHLGdCQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxHQUFHLEVBQUU7QUFDdEMsdUJBQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsMEJBQTBCLEVBQUUsQ0FBQzthQUNuRztTQUNKO0tBQ0osQ0FBQztBQUNGLGtCQUFjLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFVLElBQUksRUFBRTtBQUNsRCxZQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxD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QUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUcsR0FBRyxHQUFHLEtBQUssQ0FBRSxDQUFDLElBQUksRUFBRSxDQUFDO0tBQ25FLE1BQ0k7QUFDRCxlQUFPLEtBQUssQ0FBQztLQUNoQjtDQUNKIiwiZmlsZSI6Ii9Vc2Vycy9hbmRyZXdqb25lcy8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvZGlzdC9tYWluL2xhbmcvZml4bXl0cy9xdWlja0ZpeGVzL3dyYXBJblByb3BlcnR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG9zXzEgPSByZXF1aXJlKFwib3NcIik7XG52YXIgV3JhcEluUHJvcGVydHkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdyYXBJblByb3BlcnR5KCkge1xuICAgICAgICB0aGlzLmtleSA9IFdyYXBJblByb3BlcnR5Lm5hbWU7XG4gICAgfVxuICAgIFdyYXBJblByb3BlcnR5LnByb3RvdHlwZS5jYW5Qcm92aWRlRml4ID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgaWYgKGluZm8ucG9zaXRpb25Ob2RlICYmIGluZm8ucG9zaXRpb25Ob2RlLnBhcmVudCAmJlxuICAgICAgICAgICAgaW5mby5wb3NpdGlvbk5vZGUucGFyZW50LnBhcmVudCAmJiBpbmZvLnBvc2l0aW9uTm9kZS5wYXJlbnQucGFyZW50LnN5bWJvbCAmJlxuICAgICAgICAgICAgaW5mby5wb3NpdGlvbk5vZGUucGFyZW50LnBhcmVudC5zeW1ib2wgJiYgaW5mby5wb3NpdGlvbk5vZGUucGFyZW50LnBhcmVudC5zeW1ib2wubmFtZSA9PSAnX19jb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgIGlmIChpbmZvLnBvc2l0aW9uTm9kZS5wYXJlbnQua2luZCA9PSAxMzUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXNwbGF5OiBcIldyYXAgXCIgKyBpbmZvLnBvc2l0aW9uTm9kZS5wYXJlbnQuc3ltYm9sLm5hbWUgKyBcIiBpbiBhIHJlYWQgb25seSBwcm9wZXJ0eVwiIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdyYXBJblByb3BlcnR5LnByb3RvdHlwZS5wcm92aWRlRml4ID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgdmFyIGNsYXNzRGVjbCA9IGluZm8ucG9zaXRpb25Ob2RlLnBhcmVudC5wYXJlbnQucGFyZW50O1xuICAgICAgICB2YXIgY29uc3RydWN0b3JEZWNsID0gaW5mby5wb3NpdGlvbk5vZGUucGFyZW50LnBhcmVudDtcbiAgICAgICAgdmFyIHBhcmFtRGVjbCA9IGluZm8ucG9zaXRpb25Ob2RlLnBhcmVudDtcbiAgICAgICAgdmFyIHN5bWJvbE5hbWUgPSBpbmZvLnBvc2l0aW9uTm9kZS5wYXJlbnQuc3ltYm9sLm5hbWU7XG4gICAgICAgIHZhciB0eXBlTmFtZSA9IGdldEFyZ3VtZW50VHlwZShpbmZvLCBwYXJhbURlY2wpO1xuICAgICAgICB2YXIgZmlyc3RCcmFjZSA9IGNsYXNzRGVjbC5nZXRDaGlsZHJlbigpLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5raW5kID09IDE0OyB9KVswXTtcbiAgICAgICAgdmFyIGNsYXNzSW5kZW50ID0gaW5mby5zZXJ2aWNlLmdldEluZGVudGF0aW9uQXRQb3NpdGlvbihpbmZvLmZpbGVQYXRoLCBmaXJzdEJyYWNlLmVuZCwgaW5mby5wcm9qZWN0LnByb2plY3RGaWxlLnByb2plY3QuZm9ybWF0Q29kZU9wdGlvbnMpO1xuICAgICAgICB2YXIgaW5kZW50ID0gaW5mby5wcm9qZWN0LnByb2plY3RGaWxlLnByb2plY3QuZm9ybWF0Q29kZU9wdGlvbnMuSW5kZW50U2l6ZTtcbiAgICAgICAgdmFyIGluZGVudFNldHRpbmcgPSB7XG4gICAgICAgICAgICBjbGFzc0luZGVudDogY2xhc3NJbmRlbnQsXG4gICAgICAgICAgICBpbmRlbnQ6IGluZGVudFxuICAgICAgICB9O1xuICAgICAgICB2YXIgYXNzaWduZW1udCA9IGNyZWF0ZUFzc2lnbm1lbnQoY29uc3RydWN0b3JEZWNsLCBzeW1ib2xOYW1lLCBpbmRlbnRTZXR0aW5nLCBpbmZvLmZpbGVQYXRoKTtcbiAgICAgICAgdmFyIHByb3BlcnR5ID0gY3JlYXRlUHJvcGVydHkoY2xhc3NEZWNsLCBzeW1ib2xOYW1lLCB0eXBlTmFtZSwgaW5kZW50U2V0dGluZywgaW5mby5maWxlUGF0aCk7XG4gICAgICAgIHJldHVybiBbYXNzaWduZW1udCwgcHJvcGVydHldO1xuICAgIH07XG4gICAgcmV0dXJuIFdyYXBJblByb3BlcnR5O1xufSkoKTtcbmV4cG9ydHMuV3JhcEluUHJvcGVydHkgPSBXcmFwSW5Qcm9wZXJ0eTtcbmZ1bmN0aW9uIGNyZWF0ZUFzc2lnbm1lbnQoY29uc3RydWN0b3JEZWNsLCBzeW1ib2xOYW1lLCBpbmRlbnRTZXR0aW5nLCBmaWxlUGF0aCkge1xuICAgIHZhciBpbmRlbnRMZXZlbDIgPSBjcmVhdGVJbmRlbnQoaW5kZW50U2V0dGluZywgMik7XG4gICAgdmFyIGxhc3RCcmFjZSA9IGNvbnN0cnVjdG9yRGVjbC5ib2R5LmdldENoaWxkcmVuKClcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5raW5kID09IDE1OyB9KS5yZXZlcnNlKClbMF07XG4gICAgdmFyIG5ld1RleHQgPSBcIlwiICsgb3NfMS5FT0wgKyBpbmRlbnRMZXZlbDIgKyBcInRoaXMuX1wiICsgc3ltYm9sTmFtZSArIFwiID0gXCIgKyBzeW1ib2xOYW1lICsgXCI7XCI7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3Bhbjoge1xuICAgICAgICAgICAgc3RhcnQ6IGxhc3RCcmFjZS5lbmQgLSAoNiArIGluZGVudFNldHRpbmcuY2xhc3NJbmRlbnQpLFxuICAgICAgICAgICAgbGVuZ3RoOiAwXG4gICAgICAgIH0sXG4gICAgICAgIG5ld1RleHQ6IG5ld1RleHQsXG4gICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aFxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9wZXJ0eShjbGFzc0RlY2wsIHN5bWJvbE5hbWUsIHR5cGVOYW1lLCBpbmRlbnRTZXR0aW5nLCBmaWxlUGF0aCkge1xuICAgIHZhciBpbmRlbnRMZXZlbDEgPSBjcmVhdGVJbmRlbnQoaW5kZW50U2V0dGluZywgMSk7XG4gICAgdmFyIGluZGVudExldmVsMiA9IGNyZWF0ZUluZGVudChpbmRlbnRTZXR0aW5nLCAyKTtcbiAgICB2YXIgbmV3VGV4dCA9IChcIlwiICsgb3NfMS5FT0wgKyBpbmRlbnRMZXZlbDEgKyBcIl9cIiArIHN5bWJvbE5hbWUgKyBcIjogXCIgKyB0eXBlTmFtZSArIFwiO1wiKSArXG4gICAgICAgIChcIlwiICsgb3NfMS5FT0wgKyBpbmRlbnRMZXZlbDEgKyBcImdldCBcIiArIHN5bWJvbE5hbWUgKyBcIigpOiBcIiArIHR5cGVOYW1lICsgXCIge1wiKSArXG4gICAgICAgIChcIlwiICsgb3NfMS5FT0wgKyBpbmRlbnRMZXZlbDIgKyBcInJldHVybiB0aGlzLl9cIiArIHN5bWJvbE5hbWUgKyBcIjtcIikgK1xuICAgICAgICAoXCJcIiArIG9zXzEuRU9MICsgaW5kZW50TGV2ZWwxICsgXCJ9XCIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNwYW46IHtcbiAgICAgICAgICAgIHN0YXJ0OiBjbGFzc0RlY2wuZW5kIC0gKDIgKyBpbmRlbnRTZXR0aW5nLmNsYXNzSW5kZW50KSxcbiAgICAgICAgICAgIGxlbmd0aDogMFxuICAgICAgICB9LFxuICAgICAgICBuZXdUZXh0OiBuZXdUZXh0LFxuICAgICAgICBmaWxlUGF0aDogZmlsZVBhdGhcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSW5kZW50KGluZGVudFNldHRpbmcsIGxldmVsKSB7XG4gICAgcmV0dXJuIEFycmF5KGluZGVudFNldHRpbmcuY2xhc3NJbmRlbnQgKyAoaW5kZW50U2V0dGluZy5pbmRlbnQgKiBsZXZlbCkgKyAxKS5qb2luKCcgJyk7XG59XG5mdW5jdGlvbiBnZXRBcmd1bWVudFR5cGUoaW5mbywgcGFyYW1EZWNsKSB7XG4gICAgaWYgKHBhcmFtRGVjbC50eXBlKSB7XG4gICAgICAgIHZhciBzdGFydCA9IHBhcmFtRGVjbC50eXBlLnBvcztcbiAgICAgICAgdmFyIGVuZCA9IHBhcmFtRGVjbC50eXBlLmVuZDtcbiAgICAgICAgcmV0dXJuIGluZm8uc291cmNlRmlsZS50ZXh0LnN1YnN0cihzdGFydCwgKGVuZCAtIHN0YXJ0KSkudHJpbSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdhbnknO1xuICAgIH1cbn1cbiJdfQ==