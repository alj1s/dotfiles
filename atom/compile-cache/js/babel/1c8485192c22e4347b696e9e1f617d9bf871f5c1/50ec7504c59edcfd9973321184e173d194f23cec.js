/**
 * This file is a work in progress
 */
var makeTypeScriptGlobal_1 = require("../../typescript/makeTypeScriptGlobal");
makeTypeScriptGlobal_1.makeTsGlobal();
var tsconfig = require("../tsconfig/tsconfig");
var building = require("../lang/modules/building");
var project_1 = require("../lang/core/project");
var utils_1 = require("../lang/utils");
var startLoc;
if (process.argv.length > 2) {
    startLoc = process.argv[2];
} else {
    startLoc = process.cwd();
}
var projectFile = tsconfig.getProjectSync(startLoc);
console.log("Compiling using project file: " + projectFile.projectFilePath);
var proj = new project_1.Project(projectFile);
var errors = utils_1.selectMany(proj.projectFile.project.files.map(function (filePath) {
    var output = building.emitFile(proj, filePath);
    return output.errors;
}));
if (errors.length == 0) {
    console.log("Compile successfull");
    process.exit(0);
} else {
    console.log("Errors:");
    errors.forEach(function (e) {
        console.log(e.filePath, e.message);
    });
    process.exit(1);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRyZXdqb25lcy8uYXRvbS9wYWNrYWdlcy9hdG9tLXR5cGVzY3JpcHQvZGlzdC9tYWluL2Jpbi9hdGJ1aWxkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUdBLElBQUksc0JBQXNCLEdBQUcsT0FBTyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7QUFDOUUsc0JBQXNCLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDL0MsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDbkQsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDaEQsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksUUFBUSxDQUFDO0FBQ2IsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDekIsWUFBUSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDOUIsTUFDSTtBQUNELFlBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDNUI7QUFDRCxJQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3BELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLEdBQUcsV0FBVyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzVFLElBQUksSUFBSSxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM5QyxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxRQUFRLEVBQUU7QUFDbkYsUUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDL0MsV0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDO0NBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBQ0osSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtBQUNwQixXQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDbkMsV0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNuQixNQUNJO0FBQ0QsV0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN2QixVQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQ3hCLGVBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDdEMsQ0FBQyxDQUFDO0FBQ0gsV0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNuQiIsImZpbGUiOiIvVXNlcnMvYW5kcmV3am9uZXMvLmF0b20vcGFja2FnZXMvYXRvbS10eXBlc2NyaXB0L2Rpc3QvbWFpbi9iaW4vYXRidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBmaWxlIGlzIGEgd29yayBpbiBwcm9ncmVzc1xuICovXG52YXIgbWFrZVR5cGVTY3JpcHRHbG9iYWxfMSA9IHJlcXVpcmUoXCIuLi8uLi90eXBlc2NyaXB0L21ha2VUeXBlU2NyaXB0R2xvYmFsXCIpO1xubWFrZVR5cGVTY3JpcHRHbG9iYWxfMS5tYWtlVHNHbG9iYWwoKTtcbnZhciB0c2NvbmZpZyA9IHJlcXVpcmUoXCIuLi90c2NvbmZpZy90c2NvbmZpZ1wiKTtcbnZhciBidWlsZGluZyA9IHJlcXVpcmUoXCIuLi9sYW5nL21vZHVsZXMvYnVpbGRpbmdcIik7XG52YXIgcHJvamVjdF8xID0gcmVxdWlyZShcIi4uL2xhbmcvY29yZS9wcm9qZWN0XCIpO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vbGFuZy91dGlsc1wiKTtcbnZhciBzdGFydExvYztcbmlmIChwcm9jZXNzLmFyZ3YubGVuZ3RoID4gMikge1xuICAgIHN0YXJ0TG9jID0gcHJvY2Vzcy5hcmd2WzJdO1xufVxuZWxzZSB7XG4gICAgc3RhcnRMb2MgPSBwcm9jZXNzLmN3ZCgpO1xufVxudmFyIHByb2plY3RGaWxlID0gdHNjb25maWcuZ2V0UHJvamVjdFN5bmMoc3RhcnRMb2MpO1xuY29uc29sZS5sb2coXCJDb21waWxpbmcgdXNpbmcgcHJvamVjdCBmaWxlOiBcIiArIHByb2plY3RGaWxlLnByb2plY3RGaWxlUGF0aCk7XG52YXIgcHJvaiA9IG5ldyBwcm9qZWN0XzEuUHJvamVjdChwcm9qZWN0RmlsZSk7XG52YXIgZXJyb3JzID0gdXRpbHNfMS5zZWxlY3RNYW55KHByb2oucHJvamVjdEZpbGUucHJvamVjdC5maWxlcy5tYXAoZnVuY3Rpb24gKGZpbGVQYXRoKSB7XG4gICAgdmFyIG91dHB1dCA9IGJ1aWxkaW5nLmVtaXRGaWxlKHByb2osIGZpbGVQYXRoKTtcbiAgICByZXR1cm4gb3V0cHV0LmVycm9ycztcbn0pKTtcbmlmIChlcnJvcnMubGVuZ3RoID09IDApIHtcbiAgICBjb25zb2xlLmxvZygnQ29tcGlsZSBzdWNjZXNzZnVsbCcpO1xuICAgIHByb2Nlc3MuZXhpdCgwKTtcbn1cbmVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvcnM6Jyk7XG4gICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZS5maWxlUGF0aCwgZS5tZXNzYWdlKTtcbiAgICB9KTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG59XG4iXX0=